class DiscoController < ApplicationController
  
  def index
    @listado=Disco.all
  end
  
  def create
    parametrosHash={}
    parametrosHash[:nombre]=params[:nombre]
    parametrosHash[:artista]=params[:artista]
    parametrosHash[:anio]=params[:anio].to_i
    @disco=Disco.create parametrosHash
      if @disco.errors.any?
        puts "BDERROR: Error"
      end
    index
    render :index
  end
  
  def read
    id=params[:id].to_i
    @disco= Disco.find id
  end
  
  def update
    nombre=params[:nombre]
    artista=params[:artista]
    anio=params[:anio].to_i
    parametrosHash={}
    parametrosHash[:nombre]=nombre
    parametrosHash[:artista]=artista
    parametrosHash[:anio]=nombre
    disco= Disco.find params[:id].to_i
    update = disco.update_attributes(parametrosHash)
    if update
      puts 'Registro actualizado'
      index
      render 'index'
    else
      puts 'Registro no actualizado'
      read
      render 'read'
    end
  end
  
  def delete
    Disco.delete params[:id].to_i
    index
    render :index
  end
end
